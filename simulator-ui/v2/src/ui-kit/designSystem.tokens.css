/*
  Design System Tokens

  Правило: компоненты используют только SEMANTIC tokens (например --ds-surface-1),
  а темы меняют их значения.
*/

:root {
  /* shared scales */
  --ds-font-sans: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --ds-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

  /* =====================================================================
     Typography tokens

     Цель: совпасть с референсом из plans/ui-style-comparison.html.
     База в референсе: html { font-size: 15px }, body { line-height: 1.6 }.
     ===================================================================== */

  /* Root sizing */
  --ds-root-font-size: 15px;

  /* Body / base text */
  --ds-typo-body-font-family: var(--ds-font-sans);
  --ds-typo-body-font-size: 1rem;
  --ds-typo-body-line-height: 1.6;
  --ds-typo-body-letter-spacing: 0;
  --ds-typo-body-font-weight: 400;

  /* Section labels (small uppercase labels above groups) */
  --ds-typo-section-label-font-family: var(--ds-font-sans);
  --ds-typo-section-label-font-size: 0.7rem;
  --ds-typo-section-label-line-height: 1.4;
  --ds-typo-section-label-letter-spacing: 0.08em;
  --ds-typo-section-label-font-weight: 400;

  /* Spacing: section label block rhythm */
  --ds-section-label-margin-bottom: var(--ds-space-1);

  /* Badge (small status pills) */
  --ds-typo-badge-font-family: var(--ds-font-sans);
  --ds-typo-badge-font-size: 11px;
  --ds-typo-badge-line-height: 1;
  --ds-typo-badge-letter-spacing: 0.06em;
  --ds-typo-badge-font-weight: 800;
  --ds-typo-badge-text-transform: uppercase;
  --ds-badge-height: 22px;
  --ds-badge-padding-y: 0px;
  --ds-badge-padding-x: 8px;

  /* Alert (inline notification row) */
  --ds-typo-alert-font-family: var(--ds-font-sans);
  --ds-typo-alert-font-size: 12px;
  --ds-typo-alert-letter-spacing: 0;
  --ds-typo-alert-font-weight: 650;
  --ds-alert-padding-y: 10px;
  --ds-alert-padding-x: 12px;
  --ds-alert-gap: 10px;
  --ds-alert-icon-font-size: 14px;

  /* Form labels */
  --ds-typo-label-font-family: var(--ds-font-sans);
  --ds-typo-label-font-size: 0.8rem;
  --ds-typo-label-line-height: 1.2;
  --ds-typo-label-letter-spacing: 0;
  --ds-typo-label-font-weight: 500;

  /* Panel / section headings (card header) */
  --ds-typo-panel-heading-font-family: var(--ds-font-sans);
  --ds-typo-panel-heading-font-size: 0.88rem;
  --ds-typo-panel-heading-line-height: 1.25;
  --ds-typo-panel-heading-letter-spacing: 0;
  --ds-typo-panel-heading-font-weight: 600;

  /* Controls (inputs/selects) */
  --ds-typo-control-font-family: var(--ds-font-sans);
  --ds-typo-control-font-size: 0.85rem;
  --ds-typo-control-line-height: 1;
  --ds-typo-control-letter-spacing: 0;
  --ds-typo-control-font-weight: 400;

  /* Buttons */
  --ds-typo-button-font-family: var(--ds-font-sans);
  --ds-typo-button-font-size: 0.8rem;
  --ds-typo-button-line-height: 1;
  --ds-typo-button-letter-spacing: 0;
  --ds-typo-button-font-weight: 500;

  /* Numeric (amounts) */
  --ds-typo-numeric-font-family: var(--ds-font-mono);
  --ds-typo-numeric-font-variant: tabular-nums;

  /* Number input (Chromium) spin buttons */
  --ds-input-spin-bg: transparent;
  --ds-input-spin-divider: var(--ds-border-subtle);
  /*
    Two separate chevrons + subtle middle divider.
    Rationale: native spinner is one clickable control (top/bottom halves).
    This icon makes the two halves visually distinct without affecting behavior.
  */
  --ds-icon-input-spin: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='20' viewBox='0 0 12 20' fill='none'%3E%3Cpolyline points='3.5 5.5 6 2.5 8.5 5.5' stroke='%2394a3b8' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cline x1='3' y1='10' x2='9' y2='10' stroke='%2394a3b8' stroke-opacity='0.35' stroke-width='1'/%3E%3Cpolyline points='3.5 14.5 6 17.5 8.5 14.5' stroke='%2394a3b8' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");

  /* Number input (Chromium) spinner geometry */
  --ds-input-spin-width: 18px;
  --ds-input-spin-padding-right: 18px;
  --ds-input-spin-icon-size-x: 12px;
  --ds-input-spin-icon-size-y: 20px;

  /* Density-driven sizing (comfortable is the baseline) */
  --ds-control-height-base: 34px;
  --ds-control-padding-x-base: 12px;
  --ds-button-height-base: 34px;
  --ds-button-padding-x-base: 14px;

  --ds-density-control-height-delta: 0px;
  --ds-density-control-padding-x-delta: 0px;
  --ds-density-button-height-delta: 0px;
  --ds-density-button-padding-x-delta: 0px;
  --ds-density-input-spin-width-delta: 0px;
  --ds-density-input-spin-padding-right-delta: 0px;

  --ds-control-height: calc(var(--ds-control-height-base) + var(--ds-density-control-height-delta));
  --ds-control-padding-x: calc(var(--ds-control-padding-x-base) + var(--ds-density-control-padding-x-delta));
  --ds-button-height: calc(var(--ds-button-height-base) + var(--ds-density-button-height-delta));
  --ds-button-padding-x: calc(var(--ds-button-padding-x-base) + var(--ds-density-button-padding-x-delta));
  --ds-input-spin-width: calc(18px + var(--ds-density-input-spin-width-delta));
  --ds-input-spin-padding-right: calc(18px + var(--ds-density-input-spin-padding-right-delta));

  /* HUD casing control (kept token-driven to avoid hardcoding in primitives) */
  --ds-typo-label-text-transform: none;
  --ds-typo-panel-heading-text-transform: none;

  /* HUD geometry */
  --ds-cut: 12px; /* corner cut size for HUD clip-path */

  --ds-radius-sm: 6px;
  --ds-radius-md: 8px;
  --ds-radius-lg: 10px;

  --ds-space-1: 6px;
  --ds-space-2: 10px;
  --ds-space-3: 14px;
  --ds-space-4: 18px;

  /* motion */
  --ds-ease: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ds-dur-fast: 120ms;
  --ds-dur: 180ms;
  --ds-dur-slow: 260ms;

  /* semantic defaults (will be overwritten by theme blocks below) */
  --ds-page-bg: #0f172a;
  --ds-text-1: rgba(226, 232, 240, 0.92);
  --ds-text-2: rgba(226, 232, 240, 0.70);
  --ds-text-3: rgba(226, 232, 240, 0.55);
  --ds-border: rgba(148, 163, 184, 0.18);
  --ds-border-subtle: rgba(148, 163, 184, 0.12);

  --ds-surface-0: rgba(15, 23, 42, 0.35);
  --ds-surface-1: rgba(15, 23, 42, 0.68);
  --ds-surface-2: rgba(15, 23, 42, 0.82);

  --ds-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);
  --ds-shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.25);
  --ds-inner-highlight: inset 0 1px 0 rgba(255,255,255,0.06);

  --ds-accent: #38bdf8;
  --ds-accent-2: #a78bfa;
  --ds-ring: rgba(56, 189, 248, 0.45);
  /* Focus rings: split for controls vs buttons (shadcn differs) */
  --ds-focus-ring-control: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring-btn: 0 0 0 3px var(--ds-ring);
  /* Back-compat alias */
  --ds-focus-ring: var(--ds-focus-ring-btn);
  --ds-accent-surface: rgba(56, 189, 248, 0.12);

  /* Hover/interactive surface used by multiple primitives (buttons, progress track, etc.) */
  --ds-surface-hover: rgba(255,255,255,0.08);

  /* Bright highlight used for small glints (switch knob, HUD progress head) */
  --ds-glint: rgba(255,255,255,0.92);

  /* Stronger border used for secondary controls (e.g. shadcn secondary button) */
  --ds-border-strong: rgba(255,255,255,0.14);

  --ds-ok: #34d399;
  --ds-warn: #facc15;
  --ds-err: #fb7185;
  --ds-info: #38bdf8;

  --ds-blur: blur(10px);
  --ds-blur-soft: blur(6px);
  --ds-gridline: rgba(56, 189, 248, 0.06);

  /* HUD FX */
  --ds-glow: 0 0 12px rgba(56, 189, 248, 0.22);
  --ds-glow-strong: 0 0 20px rgba(56, 189, 248, 0.32);
  --ds-scanline: rgba(56, 189, 248, 0.035);
}

/* Density */
[data-density='comfortable'] {
  /* Explicit baseline for toggles that set comfortable/compact dynamically */
  --ds-space-1: 6px;
  --ds-space-2: 10px;
  --ds-space-3: 14px;
  --ds-space-4: 18px;

  --ds-density-control-height-delta: 0px;
  --ds-density-control-padding-x-delta: 0px;
  --ds-density-button-height-delta: 0px;
  --ds-density-button-padding-x-delta: 0px;
  --ds-density-input-spin-width-delta: 0px;
  --ds-density-input-spin-padding-right-delta: 0px;
}

[data-density='compact'] {
  /* Noticeably tighter vertical rhythm + smaller control heights (without changing font sizes) */
  --ds-space-1: 4px;
  --ds-space-2: 8px;
  --ds-space-3: 12px;
  --ds-space-4: 14px;

  --ds-density-control-height-delta: -4px;
  --ds-density-control-padding-x-delta: -1px;
  --ds-density-button-height-delta: -4px;
  --ds-density-button-padding-x-delta: -2px;
  --ds-density-input-spin-width-delta: -2px;
  --ds-density-input-spin-padding-right-delta: -4px;
}

/* Motion */
[data-motion='reduced'] {
  --ds-dur-fast: 0ms;
  --ds-dur: 0ms;
  --ds-dur-slow: 0ms;
}

/* THEME: SaaS (subtle, premium) */
[data-theme='saas'] {
  --ds-page-bg: #0b1220;

  --ds-surface-0: rgba(9, 9, 11, 0.25);
  --ds-surface-1: rgba(9, 9, 11, 0.62);
  --ds-surface-2: rgba(9, 9, 11, 0.78);

  --ds-border: rgba(161, 161, 170, 0.18);
  --ds-border-subtle: rgba(161, 161, 170, 0.12);

  --ds-text-1: rgba(250, 250, 250, 0.95);
  --ds-text-2: rgba(250, 250, 250, 0.72);
  --ds-text-3: rgba(250, 250, 250, 0.52);

  --ds-accent: #0ea5e9;
  --ds-accent-2: #22c55e;
  --ds-ring: rgba(14, 165, 233, 0.42);
  --ds-focus-ring-control: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring-btn: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring: var(--ds-focus-ring-btn);
  --ds-accent-surface: rgba(14, 165, 233, 0.12);
  --ds-surface-hover: rgba(255,255,255,0.06);
  --ds-glint: rgba(255,255,255,0.92);
  --ds-border-strong: rgba(255,255,255,0.16);

  --ds-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
  --ds-shadow-soft: 0 12px 40px rgba(0, 0, 0, 0.35);
  --ds-gridline: rgba(250, 250, 250, 0.04);
}

/* THEME: Library (Naive-like) */
[data-theme='library'] {
  --ds-page-bg: #0f1115;

  --ds-surface-0: rgba(16, 16, 20, 0.35);
  --ds-surface-1: rgba(24, 24, 28, 0.92);
  --ds-surface-2: rgba(32, 32, 40, 0.92);

  --ds-border: rgba(99, 226, 183, 0.18);
  --ds-border-subtle: rgba(99, 226, 183, 0.12);

  --ds-text-1: rgba(255, 255, 255, 0.92);
  --ds-text-2: rgba(255, 255, 255, 0.70);
  --ds-text-3: rgba(255, 255, 255, 0.52);

  --ds-accent: #63e2b7;
  --ds-accent-2: #70c0e8;
  --ds-ring: rgba(99, 226, 183, 0.30);
  --ds-focus-ring-control: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring-btn: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring: var(--ds-focus-ring-btn);
  --ds-accent-surface: rgba(99, 226, 183, 0.12);
  --ds-surface-hover: rgba(255,255,255,0.06);
  --ds-glint: rgba(255,255,255,0.92);
  --ds-border-strong: rgba(255,255,255,0.16);

  --ds-radius-sm: 8px;
  --ds-radius-md: 10px;
  --ds-radius-lg: 12px;

  --ds-shadow: 0 16px 48px rgba(0, 0, 0, 0.45);
  --ds-shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.30);
  --ds-gridline: rgba(99, 226, 183, 0.05);
}

/* THEME: shadcn/ui (dark) */
[data-theme='shadcn'] {
  /* Match shadcn column from plans/ui-style-comparison.html, but as semantic tokens */
  --ds-page-bg: #0c0c0e;

  --ds-surface-0: rgba(12, 12, 14, 0.35);
  --ds-surface-1: #18181b; /* card */
  --ds-surface-2: #09090b; /* card inner */

  --ds-border: #27272a;
  --ds-border-subtle: #27272a;
  --ds-border-strong: #3f3f46;

  /* Match reference exact text colors (avoid opacity drift) */
  --ds-text-1: #fafafa;
  --ds-text-2: #d4d4d8;
  --ds-text-3: #71717a;

  --ds-accent: #0ea5e9;
  --ds-accent-2: #38bdf8;
  --ds-ring: rgba(14, 165, 233, 0.40);
  --ds-focus-ring-control: 0 0 0 2px var(--ds-ring);
  --ds-focus-ring-btn: 0 0 0 2px var(--ds-page-bg), 0 0 0 4px var(--ds-ring);
  --ds-focus-ring: var(--ds-focus-ring-btn);
  --ds-accent-surface: rgba(14, 165, 233, 0.10);

  --ds-surface-hover: #27272a;
  --ds-glint: rgba(255,255,255,0.92);

  /* Match reference badges/alerts colors */
  --ds-ok: #34d399;
  --ds-warn: #facc15;
  --ds-err: #f87171;
  --ds-info: #38bdf8;

  --ds-radius-sm: 6px;
  --ds-radius-md: 6px;
  --ds-radius-lg: 8px;

  --ds-shadow: 0 4px 24px rgba(0, 0, 0, 0.30);
  --ds-shadow-soft: 0 2px 16px rgba(0, 0, 0, 0.22);

  /* shadcn has no glass blur by default */
  --ds-blur: none;

  --ds-gridline: rgba(255, 255, 255, 0.03);

  /* Typography aligns with shadcn column in plans/ui-style-comparison.html */
  --ds-typo-body-font-family: var(--ds-font-sans);

  /* Section labels in reference have a slightly tighter rhythm (margin-bottom: 0.3rem) */
  --ds-section-label-margin-bottom: 0.3rem;

  /* Badge typography (reference .s-badge) */
  --ds-typo-badge-font-family: var(--ds-font-sans);
  --ds-typo-badge-font-size: 0.73rem;
  --ds-typo-badge-line-height: 1.2;
  --ds-typo-badge-letter-spacing: 0;
  --ds-typo-badge-font-weight: 500;
  --ds-typo-badge-text-transform: none;
  --ds-badge-height: auto;
  --ds-badge-padding-y: 0.1rem;
  --ds-badge-padding-x: 0.5rem;

  /* Alert typography/spacing (reference .s-alert) */
  --ds-typo-alert-font-family: var(--ds-font-sans);
  --ds-typo-alert-font-size: 0.8rem;
  --ds-typo-alert-letter-spacing: 0;
  --ds-typo-alert-font-weight: 400;
  --ds-alert-padding-y: 0.5rem;
  --ds-alert-padding-x: 0.75rem;
  --ds-alert-gap: 0.5rem;
  --ds-alert-icon-font-size: 1rem;

  /* Number input spin icon color (muted shadcn gray: #71717a) */
  --ds-icon-input-spin: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='20' viewBox='0 0 12 20' fill='none'%3E%3Cpolyline points='3.5 5.5 6 2.5 8.5 5.5' stroke='%2371717a' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cline x1='3' y1='10' x2='9' y2='10' stroke='%2371717a' stroke-opacity='0.35' stroke-width='1'/%3E%3Cpolyline points='3.5 14.5 6 17.5 8.5 14.5' stroke='%2371717a' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  --ds-input-spin-divider: var(--ds-border);

  /* Theme-specific base heights; density applies via deltas */
  --ds-control-height-base: 32px;
  --ds-button-height-base: 32px;
  --ds-button-padding-x-base: 12px;
}

/* THEME: HUD (sci-fi) */
[data-theme='hud'] {
  /* Match Sci-fi/HUD from plans/ui-style-comparison.html, but as semantic tokens */
  --ds-page-bg: #060b14;

  --ds-surface-0: rgba(6, 11, 20, 0.35);
  --ds-surface-1: #0a1020; /* reference --h-bg-card */
  --ds-surface-2: #0a1020;

  /* Base border in reference is deep blue; glow is handled via accent/ring/glow tokens. */
  --ds-border: #0d3a6e; /* reference --h-border */
  --ds-border-subtle: #0d3a6e;

  --ds-text-1: rgba(200, 224, 255, 0.92);
  --ds-text-2: rgba(200, 224, 255, 0.70);
  --ds-text-3: rgba(90, 126, 168, 0.98);

  --ds-accent: #00e5ff;
  --ds-accent-2: #00b4ff;
  --ds-ring: rgba(0, 229, 255, 0.20);
  --ds-focus-ring-control: 0 0 12px rgba(0,229,255,0.20), inset 0 0 12px rgba(0,229,255,0.05);
  --ds-focus-ring-btn: 0 0 0 3px var(--ds-ring);
  --ds-focus-ring: var(--ds-focus-ring-btn);
  --ds-accent-surface: rgba(0, 229, 255, 0.15);
  --ds-surface-hover: #0f1a30;
  --ds-glint: rgba(255,255,255,0.92);
  /* matches reference --h-border-glow */
  --ds-border-strong: #1a5fb4;

  --ds-ok: #00ff88;
  --ds-warn: #ffaa00;
  --ds-err: #ff3d5a;
  --ds-info: #00b4ff;

  /* HUD badge typography (match reference .h-badge) */
  --ds-typo-badge-font-size: 0.68rem;
  --ds-typo-badge-font-weight: 600;

  /* HUD alert spacing/typography (match reference .h-alert) */
  --ds-typo-alert-font-size: 0.78rem;
  --ds-typo-alert-font-weight: 400;
  --ds-alert-padding-y: 8px;
  --ds-alert-gap: 8px;
  --ds-alert-icon-font-size: 1rem;

  /* Reference uses glow, not drop shadow */
  --ds-shadow: none;
  --ds-shadow-soft: none;
  --ds-gridline: rgba(0, 229, 255, 0.06);

  --ds-glow: 0 0 12px rgba(0, 229, 255, 0.30);
  --ds-glow-strong: 0 0 20px rgba(0, 229, 255, 0.40);
  --ds-scanline: rgba(0, 229, 255, 0.020);

  /* HUD typography */
  --ds-font-sans: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --ds-font-mono: Consolas, 'Fira Code', 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, 'Liberation Mono', 'Courier New', monospace;

  /* Typography aligns with Sci-fi/HUD column in plans/ui-style-comparison.html */
  --ds-typo-body-font-family: var(--ds-font-mono);
  --ds-typo-section-label-font-family: var(--ds-font-mono);
  --ds-typo-label-font-family: var(--ds-font-mono);
  --ds-typo-panel-heading-font-family: var(--ds-font-mono);

  /* HUD panel header in reference: font-size 0.82rem; weight 600; letter-spacing 0.10em; uppercase handled in primitives */
  --ds-typo-panel-heading-font-size: 0.82rem;
  --ds-typo-panel-heading-font-weight: 600;
  --ds-typo-panel-heading-letter-spacing: 0.10em;
  --ds-typo-control-font-family: var(--ds-font-mono);
  --ds-typo-button-font-family: var(--ds-font-mono);

  --ds-typo-label-font-size: 0.7rem;
  --ds-typo-label-font-weight: 600;
  --ds-typo-label-letter-spacing: 0.08em;

  --ds-typo-section-label-letter-spacing: 0.08em;

  --ds-typo-control-font-size: 0.82rem;
  --ds-typo-button-font-size: 0.75rem;
  --ds-typo-button-font-weight: 600;
  --ds-typo-button-letter-spacing: 0.06em;

  /* Number input spin icon color (HUD accent: #00e5ff) */
  --ds-icon-input-spin: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='20' viewBox='0 0 12 20' fill='none'%3E%3Cpolyline points='3.5 5.5 6 2.5 8.5 5.5' stroke='%2300e5ff' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cline x1='3' y1='10' x2='9' y2='10' stroke='%2300e5ff' stroke-opacity='0.35' stroke-width='1'/%3E%3Cpolyline points='3.5 14.5 6 17.5 8.5 14.5' stroke='%2300e5ff' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  --ds-input-spin-divider: var(--ds-border);

  /* Theme-specific base heights; density applies via deltas */
  --ds-control-height-base: 32px;
  --ds-button-height-base: 32px;

  /* HUD casing */
  --ds-typo-label-text-transform: uppercase;
  --ds-typo-panel-heading-text-transform: uppercase;
}

